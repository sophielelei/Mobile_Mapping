file.choose()
#-----------------------------------------------------------------------------------
# Now set up the screen 3 columns
#     screening the social code
#-----------------------------------------------------------------------------------
Workingfile <- "./data/04_Data-ready-2nd-screen/MainScreeningData_Screen1_complete.RData"
load(Workingfile)
bib_all       <- data_bib; rm(data_bib)
#-----------------------------------------------------------------------------------
# FILTER TO THE ROWS YOU WANT
#
# we just wanted the papers where it was the human impacts of flash flood
# If we ticked screen2_social as TRUE then we wanted to keep the paper
#
# FOR YOU. you want screen1_rejectnotentreP to be false (spelt correctly)
data_bib      <- bib_all[which(bib_all$Screen2_Social == TRUE),]
#-----------------------------------------------------------------------------------
# set up new columns. One for each thing you want to store.
# these are your output columns for the shiny app
#  keep these three the same
#  If you want a TRUE/FALSE, set to NA.
#  If you want it to store numbers or text,set to "
#-----------------------------------------------------------------------------------
data_bib$Screen2_Assessed <- NA
#-----------------------------------------------------------------------------------
# Now set up the screen 3 columns
#     screening the social code
#-----------------------------------------------------------------------------------
Workingfile <- "./data/04_Data-ready-2nd-screen/MainScreeningData_Screen1_complete.RData"
load(Workingfile)
bib_all       <- data_bib; rm(data_bib)
names(bib_all)
table(all_data$Screen1_RejectNOTEntreP)
table(bib_all$Screen1_RejectNOTEntreP)
#-----------------------------------------------------------------------------------
# Now set up the screen 3 columns
#     screening the social code
#-----------------------------------------------------------------------------------
Workingfile <- "./data/04_Data-ready-2nd-screen/MainScreeningData_Screen1_complete.RData"
load(Workingfile)
bib_all       <- data_bib; rm(data_bib)
#-----------------------------------------------------------------------------------
# FILTER TO THE ROWS YOU WANT
#
# we just wanted the papers where it was the human impacts of flash flood
# If we ticked screen2_social as TRUE then we wanted to keep the paper
#
# FOR YOU. you want screen1_rejectnotentreP to be false (spelt correctly)
data_bib      <- bib_all[which(bib_all$Screen1_RejectNOTEntreP == FALSE),]
#-----------------------------------------------------------------------------------
# set up new columns. One for each thing you want to store.
# these are your output columns for the shiny app
#  keep these three the same
#  If you want a TRUE/FALSE, set to NA.
#  If you want it to store numbers or text,set to "
#-----------------------------------------------------------------------------------
data_bib$Screen2_Assessed <- NA
data_bib$Screen2_Reject   <- NA
data_bib$Screen2_Methods     <- ""
data_bib$Screen2_MainTopic   <- ""
data_bib$Screen2_Location    <- ""
data_bib$Screen2_Buzzwords   <- ""
data_bib$Screen2_Tropes      <- ""
data_bib$Screen2_TypesEntreP <- ""
data_bib$Screen2_TypesMM     <- ""
data_bib$Screen2_TypesTech   <- ""
#  keep this the same
data_bib$Screen2_Notes      <- ""
#----------------------------
# and save to the data file
#----------------------------
#Workingfile <- "./data/04_Data-ready-2nd-screen/MainScreeningData_Screen1_complete.RData"
save(data_bib, file = "./data/04_Data-ready-2nd-screen/MainScreeningData_Screen2_PreProcessed.RData")
save(data_bib, file = "./data/MainScreeningData_Screen2.rData")
#---------------------------------------------------------------
# OPTIONAL.  You can automatically tag stuff before starting
#---------------------------------------------------------------
# search_risk_assessment <- grep(toupper("risk assessment"), toupper(data_bib$TI))
# data_bib$Screen3_assessment[search_risk_assessment] <- "1"
#
# search_vulnerability <- grep(toupper("vulnerability"), toupper(data_bib$TI))
# data_bib$Screen3_assessment[search_vulnerability] <- "2"
#
# search_risk_perception <- grep(toupper("risk perception"), toupper(data_bib$TI))
# data_bib$Screen3_assessment[search_risk_perception] <- "3"
#
# #----------------------------
# # Geography type search
# search_urban <- grep(toupper("urban"), toupper(data_bib$AB))
# data_bib$Screen3_geo[search_urban] <- "1"
# search_city <- grep(toupper("city"), toupper(data_bib$AB))
# data_bib$Screen3_geo[search_city] <- "1"
# search_rural <- grep(toupper("rural"), toupper(data_bib$AB))
# data_bib$Screen3_geo[search_rural] <- "2"
#
# #----------------------------
# # Flood type search
# search_runoff <- grep(toupper("runoff"), toupper(data_bib$AB))
# search_rainfall <- grep(toupper("rainfall"), toupper(data_bib$AB))
# search_dam <- grep(toupper("dam "), toupper(data_bib$AB))
# search_levee <- grep(toupper("levee"), toupper(data_bib$AB))
# search_landslide <- grep(toupper("landslide"), toupper(data_bib$AB))
# search_mudslide <- grep(toupper("mudslide"), toupper(data_bib$AB))
# search_snow <- grep(toupper("snow"), toupper(data_bib$AB))
#
# data_bib$Screen3_flood[search_runoff] <- "2"
# data_bib$Screen3_flood[search_rainfall] <- "2"
# data_bib$Screen3_flood[search_dam] <- "3"
# data_bib$Screen3_flood[search_levee] <- "3"
# data_bib$Screen3_flood[search_landslide] <- "5"
# data_bib$Screen3_flood[search_mudslide] <- "5"
# data_bib$Screen3_flood[search_snow] <- "6"
#
# save(data_bib, file = "data/screeningSocialData.rData")
######################### Not Used
#----------------------------
# Meta-analysis search
# search_climate <- grep(toupper("climate change"),toupper(data_bib$AB))
# data_bib$Screen3_meta[search_climate] <- "1"
# search_policy <- grep(toupper("policy"),toupper(data_bib$AB))
# data_bib$Screen3_meta[search_policy] <- "4"
View(data_bib)
file.choose()
rm(list=ls())
# adjust this to the appropriate folder on your system
Workingfile <- "/Users/hlg5155/Documents/GitHub/greatrex-lab/Project Bibliometric Mapping/Mobile_Mapping/data/MainScreeningData_Screen2.rData"
load(Workingfile)
#===================
names(data_bib)
data_bib <- data_bib[with(data_bib, order(Screen2_Assessed)), ]
library(shiny); runApp('code/02_Second Screen_Code/2b Second Screen main app.R')
runApp('code/02_Second Screen_Code/2b Second Screen main app.R')
